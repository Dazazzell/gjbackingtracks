<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gypsy Jazz Backing Tracks</title>

  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- DataTables JS -->
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

  <style>
    body {
      font-family: sans-serif;
      margin: 40px;
    }
    table {
      width: 80%;
      margin: auto;
    }
    thead input {
      width: 100%;
      box-sizing: border-box;
      padding: 4px;
    }
    .star {
      cursor: pointer;
      font-size: 18px;
      color: lightgray;
    }
    .star.fav {
      color: gold;
    }
    .button-row {
      text-align: center;
      margin: 20px auto;
    }
    .button-row button {
      margin: 5px;
      padding: 10px 15px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h2 style="text-align:center">Gypsy Jazz Backing Tracks</h2>

<div class="button-row">
  <button id="randomBtn">ðŸŽ² Random From Favourite</button>
  <button id="clearFiltersBtn">ðŸš« Clear All Filters</button>
  <button id="clearFavsBtn">ðŸ§¹ Clear Favourites (Filtered)</button>
</div>

<table id="myTable" class="display">
  <thead>
    <tr>
      <th>Song</th>
      <th>Type</th>
      <th>Key</th>
      <th>Details</th>
      <th>Favourite</th>
    </tr>
    <tr class="filters">
      <th><input type="text" placeholder="Filter" /></th>
      <th><input type="text" placeholder="Filter" /></th>
      <th><input type="text" placeholder="Filter" /></th>
      <th><input type="text" placeholder="Filter" /></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr><td><a href="https://www.soundslice.com/slices/MnNkc/" target="_blank">Coquette</a></td><td>Soundslice</td><td>D major</td><td>251s</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/6zckc" target="_blank">Honeysuckle Rose</a></td><td>Soundslice</td><td>F major</td><td>251s</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/lGfkc/" target="_blank">After youâ€™ve gone</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/1nfyc/" target="_blank">Aint Misbehavin</a></td><td>Soundslice</td><td>C major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/qKNkc/" target="_blank">All of me</a></td><td>Soundslice</td><td>C major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/Q1Dkc/" target="_blank">Anniversary Song | Danube</a></td><td>Soundslice</td><td>A minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/t9Dkc/" target="_blank">Artillerie lourde</a></td><td>Soundslice</td><td>C major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/QLVkc/" target="_blank">Autumn Leaves</a></td><td>Soundslice</td><td>G minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/GRP4c/" target="_blank">Avalon</a></td><td>Soundslice</td><td>F major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/Qhfyc/" target="_blank">Bei Mir Bist Du Schoen</a></td><td>Soundslice</td><td>G minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/T1ckc/" target="_blank">Blue Drag</a></td><td>Soundslice</td><td>D minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/5tVkc/" target="_blank">Bossa Dorado</a></td><td>Soundslice</td><td>D minor</td><td>-</td><td></td></tr>
    <tr><td>Brazil</td><td>-</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/24Vkc/" target="_blank">Caravan</a></td><td>Soundslice</td><td>F minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/MnNkc/" target="_blank">Coquette</a></td><td>Soundslice</td><td>D major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/jTNyc/" target="_blank">Danse norvÃ©gienne</a></td><td>Soundslice</td><td>D major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/bxfkc/" target="_blank">Daphne</a></td><td>Soundslice</td><td>D major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/SVckc/" target="_blank">Dark Eyes</a></td><td>Soundslice</td><td>D minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/dMckc" target="_blank">Dinah</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/KfVkc/" target="_blank">Djangology</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/KYckc/" target="_blank">Django's Tiger</a></td><td>Soundslice</td><td>A major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/g3ckc/" target="_blank">Douce Ambiance</a></td><td>Soundslice</td><td>G minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/VdDyc/" target="_blank">Embraceable You</a></td><td>Soundslice</td><td>Eb major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/1Bfyc/" target="_blank">Exacty Like You</a></td><td>Soundslice</td><td>C major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/6zckc" target="_blank">Honeysuckle Rose</a></td><td>Soundslice</td><td>F major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/QFDkc/" target="_blank">How High The Moon</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/75kkc/" target="_blank">Hungaria</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/StNkc/" target="_blank">I Canâ€™t Give You Anything But Love</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/qyckc/" target="_blank">Iâ€™ll See You In My Dreams</a></td><td>Soundslice</td><td>F major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/3Jfkc/" target="_blank">It Had To Be You</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/y7Vkc/" target="_blank">It Had To Be You</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/y7Vkc/" target="_blank">Jâ€™Attendrai</a></td><td>Soundslice</td><td>C major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/qzR2c/" target="_blank">Je me suis fait tout petit</a></td><td>Soundslice</td><td>B minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/NJMkc/" target="_blank">Je Suis Seul Ce Soir</a></td><td>Soundslice</td><td>C major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/dsckc/" target="_blank">Joseph Joseph</a></td><td>Soundslice</td><td>A minor</td><td>-</td><td></td></tr>
    <tr><td>La mer</td><td>-</td><td>-</td><td>-</td><td></td></tr>
    <tr><td>Lady Be Good</td><td>-</td><td>-</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/jXDkc/" target="_blank">Limehouse blues</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/MQ14c/" target="_blank">Lulu Swing</a></td><td>Soundslice</td><td>D major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/grNkc/" target="_blank">Manoir De Mes Reves</a></td><td>Soundslice</td><td>D major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/brNkc/" target="_blank">Minor Blues</a></td><td>Soundslice</td><td>G minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/Y9Nkc/" target="_blank">Minor Swing</a></td><td>Soundslice</td><td>A minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/dfyqc/" target="_blank">Mozology</a></td><td>Soundslice</td><td>key</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/Z7ykc/" target="_blank">My Melancholy Baby</a></td><td>Soundslice</td><td>C major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/LqVkc/" target="_blank">My Melancholy Baby</a></td><td>Soundslice</td><td>Eb major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/Pj8kc/" target="_blank">Nuages</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/cgVyc/" target="_blank">Oriental shuffle</a></td><td>Soundslice</td><td>F major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/TFNkc/" target="_blank">Paquito</a></td><td>Soundslice</td><td>E minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/WQM2c/" target="_blank">Sheik Of Araby</a></td><td>Soundslice</td><td>Bb major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/xPNkc/" target="_blank">Si Tu Savais</a></td><td>Soundslice</td><td>B minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/VGyyc/" target="_blank">song</a></td><td>Soundslice</td><td>key</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/VGyyc/" target="_blank">St James Infirmary</a></td><td>Soundslice</td><td>F minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/Bmyyc/" target="_blank">St James Infirmary</a></td><td>Soundslice</td><td>D minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/LRVkc/" target="_blank">Sweet Georgia Brown</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/gWfyc/" target="_blank">Sweet Sue</a></td><td>Soundslice</td><td>G major</td><td>-</td><td></td></tr>
    <tr><td>Swing 42</td><td>-</td><td>key</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/fCfyc/" target="_blank">Swing 48</a></td><td>Soundslice</td><td>G minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/V4Jyc/" target="_blank">Swing for Ninine</a></td><td>Soundslice</td><td>A minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/m3Vkc/" target="_blank">Swing Gitan</a></td><td>Soundslice</td><td>G minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/D4ykc/" target="_blank">Tchavolo Swing</a></td><td>Soundslice</td><td>D minor</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/WHPyc/" target="_blank">Them There Eyes</a></td><td>Soundslice</td><td>D Major</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.soundslice.com/slices/YmPXc/" target="_blank">song</a></td><td>-</td><td>-</td><td>-</td><td></td></tr>
    <tr><td>Topsy</td><td>-</td><td>-</td><td>-</td><td></td></tr>
    <tr><td><a href="https://www.youtube.com/watch?v=lUu1I-rlyxI&pp=ygUsd2hhdCBpcyB0aGlzIHRoaW5nIGNhbGxlZCBsb3ZlIGJhY2tpbmcgdHJhY2s%3D" target="_blank">xxx_blanksong</a></td><td>GI Youtube</td><td>-</td><td>-</td><td></td></tr>
    <tr><td><a href="" target="_blank">xxx_blanksong</a></td><td>Soundslice</td><td>key</td><td>-</td><td></td></tr>
    
    
    
    
  </tbody>
</table>

<script>
  function getCookie(name) {
    const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
    return match ? decodeURIComponent(match[2]) : null;
  }

  function setCookie(name, value, days = 365) {
    const expires = new Date(Date.now() + days * 24 * 60 * 60 * 1000).toUTCString();
    document.cookie = `${name}=${encodeURIComponent(value)}; expires=${expires}; path=/`;
  }

  function loadFavourites() {
    try {
      return JSON.parse(getCookie("favourites") || "[]");
    } catch {
      return [];
    }
  }

  function saveFavourites(favs) {
    setCookie("favourites", JSON.stringify(favs));
  }

  $(document).ready(function () {
    const favs = loadFavourites();

    $('#myTable tbody tr').each(function () {
      const songLink = $(this).find('td:nth-child(1) a');
      const songURL = songLink.attr('href');
      const isFav = favs.includes(songURL);
      const star = $('<span class="star">&#9733;</span>');
      const hidden = $('<span style="display:none;"></span>').text(isFav ? '1' : '0');
      if (isFav) star.addClass('fav');
      $(this).find('td:last').append(hidden).append(star);
    });

    const table = $('#myTable').DataTable({
      orderCellsTop: true,
      fixedHeader: true,
      pageLength: 100,
      paging: false,
      columnDefs: [
        { targets: 3, orderDataType: "dom-text-numeric" }
      ]
    });

    $('#myTable thead tr.filters th').each(function (i) {
      $('input', this).on('keyup change', function () {
        if (table.column(i).search() !== this.value) {
          table.column(i).search(this.value).draw();
        }
      });
    });

    $('#myTable').on('click', '.star', function () {
      const star = $(this);
      const hiddenSpan = star.prev('span');
      const row = star.closest('tr');
      const songURL = row.find('td:nth-child(1) a').attr('href');

      if (star.hasClass('fav')) {
        star.removeClass('fav');
        hiddenSpan.text('0');
        const index = favs.indexOf(songURL);
        if (index !== -1) favs.splice(index, 1);
      } else {
        star.addClass('fav');
        hiddenSpan.text('1');
        if (!favs.includes(songURL)) favs.push(songURL);
      }

      saveFavourites(favs);
      table.row(row).invalidate().draw(false);
    });

    $('#randomBtn').on('click', function () {
      const visibleFavs = [];

      table.rows({ filter: 'applied' }).every(function () {
        const row = $(this.node());
        const isFav = row.find('td:last .star').hasClass('fav');
        if (isFav) {
          const url = row.find('td:nth-child(1) a').attr('href');
          const title = row.find('td:nth-child(1) a').text();
          visibleFavs.push({ url, title });
        }
      });

      if (visibleFavs.length === 0) {
        alert("No favourites found in filtered list!");
        return;
      }

      const randomIndex = Math.floor(Math.random() * visibleFavs.length);
      const choice = visibleFavs[randomIndex];
      window.open(choice.url, '_blank');
    });

    $('#clearFavsBtn').on('click', function () {
      let changed = false;

      table.rows({ filter: 'applied' }).every(function () {
        const row = $(this.node());
        const star = row.find('.star');
        const hidden = row.find('td:last span:first');
        const url = row.find('td:nth-child(1) a').attr('href');

        if (star.hasClass('fav')) {
          star.removeClass('fav');
          hidden.text('0');
          const index = favs.indexOf(url);
          if (index !== -1) {
            favs.splice(index, 1);
            changed = true;
          }
        }
      });

      if (changed) {
        saveFavourites(favs);
        table.draw(false);
      }
    });

    $('#clearFiltersBtn').on('click', function () {
      $('#myTable thead tr.filters th input').val('');
      table.columns().search('').draw();
    });
  });

  $.fn.dataTable.ext.order['dom-text-numeric'] = function (settings, col) {
    return this.api().column(col, { order: 'index' }).nodes().map(function (td) {
      return parseInt($(td).find('span:first').text()) || 0;
    });
  };
</script>

</body>
</html>
